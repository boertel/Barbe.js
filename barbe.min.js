(function(a,b){var c=function(d){this.anchor=d;this.div=document.createElement("div");this.div.className=c.className;while(this.anchor.hasChildNodes()){this.anchor.removeChild(this.anchor.lastChild)}this.anchor.appendChild(this.div)};c.className="barbe-loader";c.prototype.remove=function(){this.anchor.removeChild(this.div)};var Barbe={version:"0.0.2",html:{},templates:{},settings:{template:{render:function(d,f,e){return d.render(f,e)},compile:function(d){return Hogan.compile(d)},type:["text/html"]},autoLoad:true,ajax:$.ajax,Loader:c},add:function(f,d,e){if(Barbe.html.hasOwnProperty(f)){throw"[Barbe] You've already got a template by the name: \""+f+'"'}else{if(Barbe.settings.template.compile!==b){Barbe.html[f]=Barbe.settings.template.compile(d)}else{Barbe.html[f]=d}Barbe.templates[f]={};if(typeof e!=="undefined"){var g=document.getElementById(e);if(g!==null){Barbe.templates[f].anchor=g}}Barbe.templates[f].render=function(i){i=i||{};var h=Barbe.settings.template.render(Barbe.html[f],i,Barbe.html);if(Barbe.templates[f].anchor!==b){Barbe.templates[f].anchor.innerHTML=h}return h}}},grab:function(g){var f;if(g===b){scripts=document.scripts||document.getElementsByTagName("script");for(var e=0,d=scripts.length;e<d;e++){f=scripts[e];if(Barbe.settings.template.type.indexOf(f.type)!==-1){Barbe.add(f.id,f.innerHTML,f.getAttribute("data-anchor"))}}}else{f=document.getElementById(g);if(f!==null){Barbe.add(f.id,f.innerHTML,f.getAttribute("data-anchor"))}}}};Barbe.View=function(f,g,e){if(f!==b&&Barbe.templates[f]===b){Barbe.grab(f)}if(f===b||Barbe.templates[f]===b){throw"[Barbe] template #"+f+" not found."}this.template=Barbe.templates[f].render;this.anchor=Barbe.templates[f].anchor;this.options={};this.options.Loader=Barbe.settings.Loader;var d;if(typeof e==="string"){d=e}else{if(typeof e!=="undefined"){d=e.anchor;delete e.anchor;this.options=e;this.options.Loader=(e.Loader===true)?Barbe.settings.Loader:e.Loader}}if(this.options.Loader!==false){if(typeof this.options.Loader!=="function"||this.options.Loader.prototype.remove===b){throw"[Barbe] Invalid Loader"}}if(d!==b){this.anchor=document.getElementById(d);if(this.anchor===null){throw"[Barbe] anchor #"+d+" not found."}else{Barbe.templates[f].anchor=this.anchor}}this.provider=g||{}};Barbe.View.prototype.render=function(d){if(typeof d==="undefined"){d=this.provider.data}if(this.provider.url===b&&this.provider.success!==b){d=this.provider.success(d)}if(Object.prototype.toString.call(d)==="[object Array]"){d={array:d}}this.view=this.template(d);return this.view};Barbe.View.prototype.castAnchor=function(d,f){this.loader&&this.loader.remove();var e=this.render(d);f&&f.call(this,e)};Barbe.View.prototype.ajax=function(i){var f=this;var e=this.provider.success;var g=function(j){if(e!==b){j=e.call(f,j)}f.castAnchor.call(f,j,i)};var d=this.provider.error;var h=function(j){if(d!==b){j=d.call(f,j)}f.castAnchor.call(f,j,i)};f.ajaxParams=this.provider;f.ajaxParams.success=g;Barbe.settings.ajax(f.ajaxParams)};Barbe.View.prototype.grow=function(d){if(this.provider.url!==b){if(this.options.Loader){this.loader=new this.options.Loader(this.anchor)}this.ajax.call(this,d)}else{this.castAnchor(this.provider.data,d)}};Barbe.init=function(e){for(var d in e){value=e[d];if(Barbe.settings[d]!==b){Barbe.settings[d]=value}}if(Barbe.settings.autoLoad){Barbe.grab()}};a.Barbe=Barbe})(window);