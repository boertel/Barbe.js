(function(a,b){var c=function(d){this.anchor=d;this.div=document.createElement("div");this.div.className=c.className;while(this.anchor.hasChildNodes()){this.anchor.removeChild(this.anchor.lastChild)}this.anchor.appendChild(this.div)};c.className="barbe-loader";c.prototype.remove=function(){this.anchor.removeChild(this.div)};var Barbe={version:"0.0.2",html:{},templates:{},settings:{template:{render:function(d,f,e){return d.render(f,e)},compile:function(d){return Hogan.compile(d)},type:["text/html"]},removeScripts:true,autoLoad:false,ajax:$.ajax,growCallback:function(){},Loader:c},add:function(f,d,e){if(Barbe.html.hasOwnProperty(f)){throw"[Barbe] You've already got a template by the name: \""+f+'"'}else{if(Barbe.settings.template.compile!==b){Barbe.html[f]=Barbe.settings.template.compile(d,f)}else{Barbe.html[f]=d}Barbe.templates[f]={};if(typeof e!=="undefined"){var g=document.getElementById(e);if(g!==null){Barbe.templates[f].anchor=g}}Barbe.templates[f].render=function(j,h){j=j||{};h=h||Barbe.template[f].anchor;var i=Barbe.settings.template.render(Barbe.html[f],j,Barbe.html);if(h!==b){h.innerHTML=i}return i}}},grab:function(h){var g,e=[];if(h===b){e=document.scripts||document.getElementsByTagName("script")}else{e.push(document.getElementById(h))}for(var f=0,d=e.length;f<d;f++){g=e[f];if(g!==b&&g!==null&&Barbe.settings.template.type.indexOf(g.type)!==-1){Barbe.add(g.id,g.innerHTML,g.getAttribute("data-anchor"));if(Barbe.settings.removeScripts!==false){g.parentNode.removeChild(g)}}}}};Barbe.View=function(f,g,e){if(f!==b&&Barbe.templates[f]===b){Barbe.grab(f)}if(f===b||Barbe.templates[f]===b){throw"[Barbe] template #"+f+" not found."}this.template=f;this.anchor=Barbe.templates[f].anchor;this.options={};this.options.Loader=Barbe.settings.Loader;var d;if(typeof e==="string"){d=e}else{if(typeof e!=="undefined"){d=e.anchor;delete e.anchor;this.options=e;this.options.Loader=(e.Loader===true||e.Loader===b)?Barbe.settings.Loader:e.Loader}}if(this.options.Loader!==false&&(typeof this.options.Loader!=="function"||this.options.Loader.prototype.remove===b)){throw"[Barbe] Invalid Loader"}if(d!==b){this.anchor=document.getElementById(d);if(this.anchor===null){throw"[Barbe] anchor #"+d+" not found."}}this.provider=g||{}};Barbe.View.prototype.render=function(d){if(typeof d==="undefined"){d=this.provider.data}if(this.provider.url===b&&this.provider.success!==b){d=this.provider.success(d)}if(Object.prototype.toString.call(d)==="[object Array]"){d={array:d}}this.view=Barbe.templates[this.template].render(d,this.anchor);return this.view};Barbe.View.prototype.castAnchor=function(d,f){this.loader&&this.loader.remove();var e=this.render(d);f&&f.call(this,e);Barbe.settings.growCallback&&Barbe.settings.growCallback(e)};Barbe.View.prototype.ajax=function(i){var f=this;var e=this.provider.success;var g=function(j){if(e!==b){j=e.call(f,j)||j}f.castAnchor.call(f,j,i)};var d=this.provider.error;var h=function(j){if(d!==b){j=d.call(f,j)}f.castAnchor.call(f,j,i)};f.ajaxParams=this.provider;f.ajaxParams.success=g;f.ajaxParams.error=h;if(typeof this.provider.url==="function"){this.provider.url.call(this,g)}else{Barbe.settings.ajax(f.ajaxParams)}};Barbe.View.prototype.grow=function(d){if(this.provider.url!==b){if(this.options.Loader){this.loader=new this.options.Loader(this.anchor)}this.ajax.call(this,d)}else{this.castAnchor(this.provider.data,d)}};Barbe.init=function(e){for(var d in e){value=e[d];if(Barbe.settings[d]!==b){Barbe.settings[d]=value}}if(Barbe.settings.autoLoad){Barbe.grab()}};a.Barbe=Barbe})(window);