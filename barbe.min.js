(function(a,b){var Barbe={version:"0.0.1",html:{},templates:{},settings:{template:{render:function(c,e,d){return c.render(e,d)},compile:function(c){return Hogan.compile(c)},type:["text/html"]},autoLoad:true,ajax:$.ajax,loader:{className:"barbe-loader",id:"barbe_loader"}},add:function(e,c,d){if(Barbe.html.hasOwnProperty(e)){throw"[Barbe] You've already got a template by the name: \""+e+'"'}else{if(Barbe.settings.template.compile!==b){Barbe.html[e]=Barbe.settings.template.compile(c)}else{Barbe.html[e]=c}Barbe.templates[e]={};if(typeof d!=="undefined"){var f=document.getElementById(d);if(f!==null){Barbe.templates[e].anchor=f}}Barbe.templates[e].render=function(h){h=h||{};var g=Barbe.settings.template.render(Barbe.html[e],h,Barbe.html);if(Barbe.templates[e].anchor!==b){Barbe.templates[e].anchor.innerHTML=g}return g}}},grab:function(f){var e;if(f===b){scripts=document.scripts||document.getElementsByTagName("script");for(var d=0,c=scripts.length;d<c;d++){e=scripts[d];if(Barbe.settings.template.type.indexOf(e.type)!==-1){Barbe.add(e.id,e.innerHTML,e.getAttribute("data-anchor"))}}}else{e=document.getElementById(f);if(e!==null){Barbe.add(e.id,e.innerHTML,e.getAttribute("data-anchor"))}}}};Barbe.View=function(e,f,d){if(e!==b&&Barbe.templates[e]===b){Barbe.grab(e)}if(e===b||Barbe.templates[e]===b){throw"[Barbe] template #"+e+" not found."}this.template=Barbe.templates[e].render;this.anchor=Barbe.templates[e].anchor;this.options={};var c;if(typeof d==="string"){c=d}else{if(typeof d!=="undefined"){c=d.anchor;delete d.anchor;this.options=d}}if(c!==b){this.anchor=document.getElementById(c);if(this.anchor===null){throw"[Barbe] anchor #"+c+" not found."}else{Barbe.templates[e].anchor=this.anchor}}this.provider=f||{}};Barbe.View.prototype.render=function(c){if(typeof c==="undefined"){c=this.provider.data}if(this.provider.url===b&&this.provider.success!==b){c=this.provider.success(c)}if(Object.prototype.toString.call(c)==="[object Array]"){c={array:c}}this.view=this.template(c);return this.view};Barbe.View.prototype.castAnchor=function(c,e){this.loader&&this.loader.remove();var d=this.render(c);e&&e.call(this,d)};Barbe.View.prototype.ajax=function(h){var e=this;var d=this.provider.success;var f=function(i){if(d!==b){i=d.call(e,i)}e.castAnchor.call(e,i,h)};var c=this.provider.error;var g=function(i){if(c!==b){i=c.call(e,i)}e.castAnchor.call(e,i,h)};e.ajaxParams=this.provider;e.ajaxParams.success=f;Barbe.settings.ajax(e.ajaxParams)};Barbe.View.prototype.grow=function(c){if(this.provider.url!==b){if(Barbe.settings.loader!==false){this.loader=new Barbe.Loader(this.anchor)}this.ajax.call(this,c)}else{this.castAnchor(this.provider.data,c)}};Barbe.Loader=function(c){this.anchor=c;this.div=document.createElement("div");this.div.className=Barbe.settings.loader.className;this.div.id=Barbe.settings.loader.id;while(this.anchor.hasChildNodes()){this.anchor.removeChild(this.anchor.lastChild)}this.anchor.appendChild(this.div)};Barbe.Loader.prototype.remove=function(){this.anchor.removeChild(this.div)};Barbe.init=function(d){for(var c in d){value=d[c];if(Barbe.settings[c]!==b){Barbe.settings[c]=value}}if(Barbe.settings.autoLoad){Barbe.grab()}};a.Barbe=Barbe})(window);