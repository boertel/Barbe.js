(function(){var Barbe={html:{},templates:{},settings:{template:{engine:Mustache.render,type:["text/html"]},ajax:$.ajax},add:function(c,a,b){if(Barbe.html.hasOwnProperty(c)){throw"[Barbe] You've already got a template by the name: \""+c+'"'}else{Barbe.html[c]=a;Barbe.templates[c]={};if(typeof b!=="undefined"){var d=document.getElementById(b);if(d!==null){Barbe.templates[c].anchor=d}}Barbe.templates[c].render=function(f){f=f||{};var e=Barbe.settings.template.engine(Barbe.html[c],f,Barbe.html);if(Barbe.templates[c].anchor!==undefined){Barbe.templates[c].anchor.innerHTML=e}return e}}},grab:function(){scripts=document.scripts||document.getElementsByTagName("script");for(var b=0,a=scripts.length;b<a;b++){var c=scripts[b];if(Barbe.settings.template.type.indexOf(c.type)!==-1){Barbe.add(c.id,c.innerHTML,c.getAttribute("data-anchor"))}}}};Barbe.View=function(c,d,b){if(c===undefined||Barbe.templates[c]===undefined){throw"[Barbe] template #"+c+" not found."}this.template=Barbe.templates[c].render;this.anchor=Barbe.templates[c].anchor;this.options={};var a;if(typeof b==="string"){a=b}else{if(typeof b!=="undefined"){a=b.anchor;delete b.anchor;this.options=b}}if(a!==undefined){this.anchor=document.getElementById(a);if(this.anchor===null){throw"[Barbe] anchor #"+a+" not found."}else{Barbe.templates[c].anchor=this.anchor}}this.provider=d||{}};Barbe.View.prototype.render=function(a){if(Array.isArray(a)){a={array:a}}this.view=this.template(a);return this.view};Barbe.View.prototype.castAnchor=function(a,c){this.loader&&this.loader.remove();var b=this.render(a);c&&c.call(this,b)};Barbe.View.prototype.ajax=function(d){var a=this;var c=this.provider.success;var b=function(e){if(c!==undefined){e=c.call(a,e)}a.castAnchor.call(a,e,d)};a.ajaxParams=this.provider;a.ajaxParams.success=b;Barbe.settings.ajax(a.ajaxParams)};Barbe.View.prototype.grow=function(b){if(this.provider.url!==undefined){this.loader=new Barbe.Loader(this.anchor);this.ajax.call(this,b)}else{var a=this.provider.data;if(this.provider.success!==undefined){a=this.provider.success&&this.provider.success(this.provider.data)}this.castAnchor(a,b)}};Barbe.Loader=function(a){this.anchor=a;this.div=document.createElement("div");this.div.className="barbe-loader";this.div.id="barbe_loader";while(this.anchor.hasChildNodes()){this.anchor.removeChild(this.anchor.lastChild)}this.anchor.appendChild(this.div)};Barbe.Loader.prototype.remove=function(){this.anchor.removeChild(this.div)};window.Barbe=Barbe;Barbe.grab()})();if(!Array.isArray){Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}};